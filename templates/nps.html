{% extends "base.html" %}

{% block content %}
<div class="progress">
    <div class="progress-bar" role="progressbar" style="width: 62.5%;" aria-valuenow="62.5" aria-valuemin="0" aria-valuemax="100"></div>
</div>

<h2 class="text-center mb-4">
    {% if session.language == 'Arabic' %}
        بناءً على تجربتك الأخيرة، ما مدى احتمالية أن توصي بنا لأصدقائك أو عائلتك أو زملائك؟
    {% else %}
        Based on your most recent experience, how likely are you to recommend us to your friends, family or colleagues?
    {% endif %}
</h2>

<form method="POST" class="text-center">
    <div class="card p-3 mb-4">
        <!-- Ribbon wrapper with horizontal scrolling for mobile -->
        <div class="nps-ribbon-container overflow-auto">
            <div class="d-flex nps-ribbon justify-content-start">
                {% for i in range(11) %}
                    <div class="nps-item text-center">
                        <input class="d-none" type="radio" name="nps" id="nps{{ i }}" value="{{ i }}"
                            {% if previous_nps is not none and previous_nps == i|string %}checked{% endif %}>
                        <label class="nps-label" for="nps{{ i }}"
                            style="background-color: hsl({{ 120 * i // 10 }}, 80%, 80%);">
                            {{ i }}
                        </label>
                    </div>
                {% endfor %}
            </div>
        </div>

        <!-- Labels below the ribbon -->
        <div class="row mt-3">
            <div class="col-6 text-start small text-muted">
                {% if session.language == 'Arabic' %}
                    ليس من المحتمل على الإطلاق
                {% else %}
                    Not at all likely
                {% endif %}
            </div>
            <div class="col-6 text-end small text-muted">
                {% if session.language == 'Arabic' %}
                    محتمل للغاية
                {% else %}
                    Extremely Likely
                {% endif %}
            </div>
        </div>
        

    <!-- Navigation buttons -->
    <div class="row">
        {% if session.language == 'Arabic' %}
            <div class="col text-start">
                <button type="submit" class="btn btn-primary">←التالي</button>
            </div>
            <div class="col text-end">
                <a href="{{ url_for('additional_feedback') }}" class="btn btn-outline-secondary">السابق→</a>
            </div>
        {% else %}
            <div class="col text-start">
                <a href="{{ url_for('additional_feedback') }}" class="btn btn-outline-secondary">← Previous</a>
            </div>
            <div class="col text-end">
                <button type="submit" class="btn btn-primary">Next →</button>
            </div>
        {% endif %}
    </div>
</form>

<!-- Styles -->
<style>
    .nps-ribbon-container {
        width: 100%;
        overflow-x: auto;
        padding-bottom: 5px;
    }
    
    .nps-ribbon {
        flex-wrap: nowrap;
        min-width: 600px; /* Maintains a single-line ribbon on scroll */
        justify-content: center;
    }
    
    .nps-item {
        flex: 0 0 auto;
        width: 50px;
        margin: 0 4px;
        text-align: center;
    }
    
    .nps-label {
        display: block;
        padding: 10px 0;
        border-radius: 6px;
        font-weight: bold;
        cursor: pointer;
        border: 2px solid transparent;
        transition: border 0.2s ease-in-out;
        background-color: #e0e0e0;
    }
    
    input[type="radio"]:checked + .nps-label {
        border: 2px solid #333;
        background-color: #cdeac0 !important;
    }
    </style>
    
{% endblock %}
